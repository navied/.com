<!doctype html>
<html>
<body>
<form name="form" action="https://bnc.lt/d/W6MImlddem" method="POST">
	<div class="form-item">
					<label for="phone"><h2>Phone number:</h2></label>
					<input name="phone" id="phone" placeholder="+1 (123) 123-1234" class="text" type="text">
					<button type="submit" class="btn-submit">
						<span class="btn-submit-label">Send me the app</span>
					</button>
					<label class="error-feedback"></label>
				</div>
			</form>


		<script type="text/javascript">
			window.onload = function() {
				document.querySelector('form').onsubmit = function() {
					var request = new XMLHttpRequest();
					request.open('POST', this.action, true);
					request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
					request.setRequestHeader("Accept", "application/json");

					document.querySelector('label.error-feedback').innerHTML = '';
					document.querySelector('span.btn-submit-label').innerHTML = 'Sending SMS...';

					document.querySelector('.btn-submit').disabled = true;
					document.getElementById('phone').disabled = true;

					function error(message) {
						document.querySelector('label.error-feedback').innerHTML = message;
						document.querySelector('span.btn-submit-label').innerHTML = 'Send me the app';
						document.querySelector('.btn-submit').disabled = false;
						document.getElementById('phone').disabled = false;
					}
					function success() {
						document.querySelector('span.btn-submit-label').innerHTML = 'SMS Sent!';
						document.querySelector('.btn-submit').style.background = '#56AE0B';
						document.getElementById('plane').style.display = 'none';
						document.getElementById('check').style.display = 'block'
					}
					request.onload = function() {
						var data = JSON.parse(this.response);
						if (this.status >= 200 && this.status < 400) {
							success();
						}
						else {
							error(data.message);
						}
					};
					request.onerror = function() {
						error('Could not complete the request.');
					};

					request.send('phone=' + encodeURIComponent(document.querySelector('input#phone').value));
					return false;
				};
			};
		</script>
</body>
</html>	
